/*!
 * (C) Ionic http://ionicframework.com - MIT License
 * Built with http://stenciljs.com
 */
Ionic.loadBundle("gesture.js",["exports"],function(t){window.Ionic.h;var e,i=function(){function t(t,e,i){this.dirty=!1,this.isPan=0;var s=i*(Math.PI/180);this.isDirX="x"===t,this.maxCosine=Math.cos(s),this.threshold=e*e}return t.prototype.start=function(t,e){this.startX=t,this.startY=e,this.isPan=0,this.dirty=!0},t.prototype.detect=function(t,e){if(!this.dirty)return!1;var i=t-this.startX,s=e-this.startY,r=i*i+s*s;if(r<this.threshold)return!1;var o=Math.sqrt(r),n=(this.isDirX?i:s)/o;return n>this.maxCosine?this.isPan=1:n<-this.maxCosine?this.isPan=-1:this.isPan=0,this.dirty=!1,!0},t.prototype.isGesture=function(){return 0!==this.isPan},t.prototype.getDirection=function(){return this.isPan},t}(),s=function(){function t(t,e,i,s,r){this.id=e,this.name=i,this.priority=s,this.disableScroll=r,this.ctrl=t}return t.prototype.canStart=function(){return!!this.ctrl&&this.ctrl.canStart(this.name)},t.prototype.start=function(){return!!this.ctrl&&this.ctrl.start(this.name,this.id,this.priority)},t.prototype.capture=function(){if(!this.ctrl)return!1;var t=this.ctrl.capture(this.name,this.id,this.priority);return t&&this.disableScroll&&this.ctrl.disableScroll(this.id),t},t.prototype.release=function(){this.ctrl&&(this.ctrl.release(this.id),this.disableScroll&&this.ctrl.enableScroll(this.id))},t.prototype.destroy=function(){this.release(),this.ctrl=void 0},t}(),r=function(){function t(t,e,i,s){this.id=t,this.disable=i,this.disableScroll=s,this.ctrl=e}return t.prototype.block=function(){if(this.ctrl){if(this.disable)for(var t=0,e=this.disable;t<e.length;t++){var i=e[t];this.ctrl.disableGesture(i,this.id)}this.disableScroll&&this.ctrl.disableScroll(this.id)}},t.prototype.unblock=function(){if(this.ctrl){if(this.disable)for(var t=0,e=this.disable;t<e.length;t++){var i=e[t];this.ctrl.enableGesture(i,this.id)}this.disableScroll&&this.ctrl.enableScroll(this.id)}},t.prototype.destroy=function(){this.unblock(),this.ctrl=void 0},t}(),o=new(function(){function t(t){this.doc=t,this.gestureId=0,this.requestedStart=new Map,this.disabledGestures=new Map,this.disabledScroll=new Set,this.capturedId=null}return t.prototype.createGesture=function(t){return new s(this,this.newID(),t.name,t.priority?t.priority:0,!!t.disableScroll)},t.prototype.createBlocker=function(t){return void 0===t&&(t={}),new r(this.newID(),this,t.disable,!!t.disableScroll)},t.prototype.start=function(t,e,i){return this.canStart(t)?(this.requestedStart.set(e,i),!0):(this.requestedStart.delete(e),!1)},t.prototype.capture=function(t,e,i){if(!this.start(t,e,i))return!1;var s=this.requestedStart,r=-1e4;if(s.forEach(function(t){r=Math.max(r,t)}),r===i){this.capturedId=e,s.clear();var o=new CustomEvent("ionGestureCaptured",{detail:t});return this.doc.body.dispatchEvent(o),!0}return s.delete(e),!1},t.prototype.release=function(t){this.requestedStart.delete(t),this.capturedId&&t===this.capturedId&&(this.capturedId=null)},t.prototype.disableGesture=function(t,e){var i=this.disabledGestures.get(t);i||(i=new Set,this.disabledGestures.set(t,i)),i.add(e)},t.prototype.enableGesture=function(t,e){var i=this.disabledGestures.get(t);i&&i.delete(e)},t.prototype.disableScroll=function(t){this.disabledScroll.add(t)},t.prototype.enableScroll=function(t){this.disabledScroll.delete(t)},t.prototype.canStart=function(t){return!this.capturedId&&!this.isDisabled(t)},t.prototype.isCaptured=function(){return!!this.capturedId},t.prototype.isScrollDisabled=function(){return this.disabledScroll.size>0},t.prototype.isDisabled=function(t){var e=this.disabledGestures.get(t);return!!(e&&e.size>0)},t.prototype.newID=function(){return this.gestureId++,this.gestureId},t}())(document);function n(t,i,s,r){var o,n,h=function(t){if(void 0===e)try{var i=Object.defineProperty({},"passive",{get:function(){e=!0}});t.addEventListener("optsTest",function(){},i)}catch(t){e=!1}return!!e}(t)?{capture:!!r.capture,passive:!!r.passive}:!!r.capture;return t.__zone_symbol__addEventListener?(o="__zone_symbol__addEventListener",n="__zone_symbol__removeEventListener"):(o="addEventListener",n="removeEventListener"),t[o](i,s,h),function(){t[n](i,s,h)}}var h=function(){function t(t,e,i,s,r){this.el=t,this.pointerDown=e,this.pointerMove=i,this.pointerUp=s,this.options=r,this.lastTouchEvent=0,this.bindTouchEnd=this.handleTouchEnd.bind(this),this.bindMouseUp=this.handleMouseUp.bind(this)}return Object.defineProperty(t.prototype,"disabled",{set:function(t){t?(this.rmTouchStart&&this.rmTouchStart(),this.rmMouseStart&&this.rmMouseStart(),this.rmTouchStart=this.rmMouseStart=void 0,this.stop()):(this.rmTouchStart||(this.rmTouchStart=n(this.el,"touchstart",this.handleTouchStart.bind(this),this.options)),this.rmMouseStart||(this.rmMouseStart=n(this.el,"mousedown",this.handleMouseDown.bind(this),this.options)))},enumerable:!0,configurable:!0}),t.prototype.stop=function(){this.stopTouch(),this.stopMouse()},t.prototype.destroy=function(){this.disabled=!0,this.pointerUp=this.pointerMove=this.pointerDown=void 0},t.prototype.handleTouchStart=function(t){this.lastTouchEvent=Date.now()+2e3,this.pointerDown(t,c)&&(!this.rmTouchMove&&this.pointerMove&&(this.rmTouchMove=n(this.el,"touchmove",this.pointerMove,this.options)),this.rmTouchEnd||(this.rmTouchEnd=n(this.el,"touchend",this.bindTouchEnd,this.options)),this.rmTouchCancel||(this.rmTouchCancel=n(this.el,"touchcancel",this.bindTouchEnd,this.options)))},t.prototype.handleMouseDown=function(t){this.lastTouchEvent>Date.now()||this.pointerDown(t,u)&&(!this.rmMouseMove&&this.pointerMove&&(this.rmMouseMove=n(a(this.el),"mousemove",this.pointerMove,this.options)),this.rmMouseUp||(this.rmMouseUp=n(a(this.el),"mouseup",this.bindMouseUp,this.options)))},t.prototype.handleTouchEnd=function(t){this.stopTouch(),this.pointerUp&&this.pointerUp(t,c)},t.prototype.handleMouseUp=function(t){this.stopMouse(),this.pointerUp&&this.pointerUp(t,u)},t.prototype.stopTouch=function(){this.rmTouchMove&&this.rmTouchMove(),this.rmTouchEnd&&this.rmTouchEnd(),this.rmTouchCancel&&this.rmTouchCancel(),this.rmTouchMove=this.rmTouchEnd=this.rmTouchCancel=void 0},t.prototype.stopMouse=function(){this.rmMouseMove&&this.rmMouseMove(),this.rmMouseUp&&this.rmMouseUp(),this.rmMouseMove=this.rmMouseUp=void 0},t}();function a(t){return t instanceof Document?t:t.ownerDocument}var u=1,c=2,d=function(){function t(t){this.positions=[],this.hasCapturedPan=!1,this.hasStartedPan=!1,this.hasFiredStart=!0,this.isMoveQueued=!1;var e=Object.assign({disableScroll:!1,direction:"x",gesturePriority:0,passive:!0,maxAngle:40,threshold:10},t);this.canStart=e.canStart,this.onWillStart=e.onWillStart,this.onStart=e.onStart,this.onEnd=e.onEnd,this.onMove=e.onMove,this.threshold=e.threshold,this.queue=e.queue,this.detail={type:"pan",startX:0,startY:0,startTimeStamp:0,currentX:0,currentY:0,velocityX:0,velocityY:0,deltaX:0,deltaY:0,timeStamp:0,event:void 0,data:void 0},this.pointerEvents=new h(e.el,this.pointerDown.bind(this),this.pointerMove.bind(this),this.pointerUp.bind(this),{capture:!1}),this.pan=new i(e.direction,e.threshold,e.maxAngle),this.gesture=o.createGesture({name:t.gestureName,priority:t.gesturePriority,disableScroll:t.disableScroll})}return Object.defineProperty(t.prototype,"disabled",{set:function(t){this.pointerEvents.disabled=t},enumerable:!0,configurable:!0}),t.prototype.destroy=function(){this.gesture.destroy(),this.pointerEvents.destroy()},t.prototype.pointerDown=function(t){var e=l(t);if(this.hasStartedPan||!this.hasFiredStart)return!1;var i=this.detail;return p(t,i),i.startX=i.currentX,i.startY=i.currentY,i.startTimeStamp=i.timeStamp=e,i.velocityX=i.velocityY=i.deltaX=i.deltaY=0,i.event=t,this.positions.length=0,(!this.canStart||!1!==this.canStart(i))&&(this.gesture.release(),!!this.gesture.start()&&(this.positions.push(i.currentX,i.currentY,e),this.hasStartedPan=!0,0===this.threshold?this.tryToCapturePan():(this.pan.start(i.startX,i.startY),!0)))},t.prototype.pointerMove=function(t){if(this.hasCapturedPan)!this.isMoveQueued&&this.hasFiredStart&&(this.isMoveQueued=!0,this.calcGestureData(t),this.queue.write(this.fireOnMove.bind(this)));else{var e=this.detail;this.calcGestureData(t),this.pan.detect(e.currentX,e.currentY)&&this.pan.isGesture()&&(this.tryToCapturePan()||this.abortGesture())}},t.prototype.fireOnMove=function(){if(this.hasCapturedPan){var t=this.detail;this.isMoveQueued=!1,this.onMove&&this.onMove(t)}},t.prototype.calcGestureData=function(t){var e=this.detail;p(t,e);var i=e.currentX,s=e.currentY,r=e.timeStamp=l(t);e.deltaX=i-e.startX,e.deltaY=s-e.startY,e.event=t;for(var o=r-100,n=this.positions,h=n.length-1;h>0&&n[h]>o;)h-=3;if(h>1){var a=1/(n[h]-r),u=n[h-1]-s,c=n[h-2]-i;e.velocityX=c*a,e.velocityY=u*a}else e.velocityX=0,e.velocityY=0;n.push(i,s,r)},t.prototype.tryToCapturePan=function(){if(this.gesture&&!this.gesture.capture())return!1;this.hasCapturedPan=!0,this.hasFiredStart=!1;var t=this.detail;return t.startX=t.currentX,t.startY=t.currentY,t.startTimeStamp=t.timeStamp,this.onWillStart?this.onWillStart(this.detail).then(this.fireOnStart.bind(this)):this.fireOnStart(),!0},t.prototype.fireOnStart=function(){this.onStart&&this.onStart(this.detail),this.hasFiredStart=!0},t.prototype.abortGesture=function(){this.reset(),this.pointerEvents.stop(),this.notCaptured&&this.notCaptured(this.detail)},t.prototype.reset=function(){this.hasCapturedPan=!1,this.hasStartedPan=!1,this.isMoveQueued=!1,this.hasFiredStart=!0,this.gesture&&this.gesture.release()},t.prototype.pointerUp=function(t){var e=this.hasCapturedPan,i=this.hasFiredStart;if(this.reset(),i){this.calcGestureData(t);var s=this.detail;e?this.onEnd&&this.onEnd(s):this.notCaptured&&this.notCaptured(s)}},t}();function p(t,e){var i=0,s=0;if(t){var r=t.changedTouches;if(r&&r.length>0){var o=r[0];i=o.clientX,s=o.clientY}else void 0!==t.pageX&&(i=t.pageX,s=t.pageY)}e.currentX=i,e.currentY=s}function l(t){return t.timeStamp||Date.now()}t.create=function(t){return new d(t)},t.Gesture=d,Object.defineProperty(t,"__esModule",{value:!0})});